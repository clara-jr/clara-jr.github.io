---
layout: ../../layouts/PostLayout.astro
title: 'Python, geometr√≠a y BiciMAD üö¥üèª‚Äç'
pubDate: 2020/05/10
description: '¬øAlguna vez has dudado sobre qu√© te compensaba m√°s entre distintas opciones de compra de una misma cosa? Seguro que si te has planteado usar las bicis de BiciMAD sabes de lo que hablo'
author: 'Clara Jim√©nez'
image:
  url: '/images/posts/curva1.png'
  alt: 'BiciMAD'
tags: ['python', 'maths']
---

Llevamos 58 d√≠as en un estado de alarma en Espa√±a provocado por una crisis sanitaria por pandemia. En estos d√≠as estamos dejando atr√°s poco a poco el confinamiento dejando paso a la desescalada y sus famosas fases. Los primeros en salir fueron los ni√±os y ahora es momento de pasear y hacer deporte. En general lo estamos haciendo bien, pero parece que hay zonas en las que tanto deportista se est√° amontonando. A lo mejor no hemos hecho deporte en nuestra vida y ahora nos apasiona, pero bueno, hay que tener cuidado. El deporte es salud, s√≠, pero hay que saber dosificarlo y venimos de muchos d√≠as de sedentarismo entre la silla, el sof√° y la cama. Yo misma me hice un esguince sin salir de casa, har√° cosa de 2 semanas, corriendo por el pasillo para llegar a las 20:00 a la ventana del sal√≥n a aplaudir. Lo m√°s apasionante del d√≠a. Y qu√© suerte la m√≠a que cuando nos dejan salir a dar un paseo, no puedo.

¬øY qu√© es lo que me gustar√≠a a m√≠ ahora mismo? Pues no haberme torcido el pie, claramente. Y poder salir a pasear y por qu√© no, a montar en bici. Y sois muchos los que est√°is aprovechando tambi√©n para sacar vuestras bicis por vuestra ciudad. Pero, ¬øy si quiero montar en bici y no tengo? Dir√©is ‚Äúpues te aguantas‚Äù. No, hombre, no‚Ä¶ yo vivo en Madrid y aunque no sea una ciudad hecha para recorrerla en bici, tiene su encanto y tambi√©n tiene una soluci√≥n para este problema: BiciMAD. Despu√©s de 37 d√≠as sin funcionar debido a la pandemia y las restricciones de confinamiento, BiciMAD volvi√≥ a estar disponible el 22 de abril, pudiendo usarse las bicicletas tomando las debidas precauciones de higiene que eviten la propagaci√≥n del virus.

## ¬øCu√°nto cuesta BiciMAD?

Si miramos en la web de BiciMAD [\[1\]](https://www.bicimad.com/index.php?s=tarifas) podremos encontrar una tabla preciosa con los precios de los viajes en bicicleta por Madrid. Vemos dos columnas que nos indican distintos precios seg√∫n el tipo de servicio que solicitemos.

![Precios BiciMAD](/images/posts/bicimad.png)

En caso de disponer de un abono anual de BiciMAD, tendremos un gasto inicial de 15 o 25 ‚Ç¨ seg√∫n tengamos a su vez un abono transporte del CRTM o no, y a ese gasto inicial se le sumar√≠an 0.50 ‚Ç¨ por la primera media hora de cada trayecto en bici y 0.60 ‚Ç¨ por cada media hora siguiente. As√≠ hasta cumplir en cada trayecto un m√°ximo de 2 horas ya que, si nos pasamos de las 2 horas, tendr√≠amos una penalizaci√≥n de 4 ‚Ç¨ por cada hora extra.

Si en lugar de optar por un abono anual de BiciMAD, disponemos de una tarjeta ocasional recargable por cada trayecto, tendremos que pagar 2 ‚Ç¨ por la primera hora y 4 ‚Ç¨ por la segunda hora. De nuevo, a partir de la tercera hora tendr√≠amos una penalizaci√≥n de 4 ‚Ç¨/hora.

Tambi√©n disponemos de bonificaciones de 10 c√©ntimos por diferentes motivos pero que son equivalentes en ambas situaciones, tanto con abono de BiciMAD como sin √©l. Tambi√©n son equivalentes las penalizaciones por sobrepasar las 2 horas de uso de las bicicletas.

Pues bien, ¬øahora qu√© hacemos con esto? ¬øTen√©is ya claro qu√© quer√©is? ¬øQu√© os compensa m√°s? ¬øCompramos el abono anual o la tarjeta ocasional? Sinceramente, no creo que nadie sea capaz de darme una respuesta correcta sin meditarlo profundamente. Y cuando digo meditarlo quiero decir calcularlo. Y, aun as√≠, aun teniendo l√°piz, papel y una calculadora, os acabar√≠a doliendo la cabeza y posiblemente a√∫n no habr√≠ais conseguido responderme. Me atrever√≠a a decir que os dejar√≠ais llevar por vuestra intuici√≥n. Pero,‚Ä¶ hablando de dinero, yo creo que lo mejor es saber a ciencia cierta qu√© es lo que debemos hacer. Y yo voy a saber cu√°l es la respuesta a este enigma programando. B√°sicamente, saber matem√°ticas y, en este caso, programar, sirve para mucho a lo largo de la vida, y hay gente que vive ajena a esta situaci√≥n mientras siguen creyendo que son felices.

## Python nos dice si nos compensa un abono anual o pagar por cada paseo

Quien dice Python dice JavaScript, Java, Go,‚Ä¶ ¬°incluso LOLCODE o Brainfuck! Pero bueno, yo voy a mostrar el ejemplo de resoluci√≥n hecho en Python[\[2\]](https://repl.it/@ClaraJimenez/BiciMAD).

<iframe title="repl.it" src="https://repl.it/@ClaraJimenez/BiciMAD?lite=true" scrolling="no" allowtransparency="true" allowfullscreen="" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals" width="100%" height="400px" frameborder="no"></iframe>

B√°sicamente, se trata de averiguar cu√°ntas veces tengo que coger la bici a lo largo de un a√±o para que me compense pagar por el abono anual. En la opci√≥n de usar BiciMAD con un abono anual, cada pago se har√° por periodos de media hora de uso. Si utilizamos la bicicleta durante hora y media, pagaremos hora y media. Sin embargo, si compramos una tarjeta ocasional, pagaremos por cada hora que utilicemos la bicicleta. Por ejemplo, si consumimos hora y media, pagaremos lo mismo que continuando nuestro paseo hasta las 2 horas. As√≠ que lo m√°s sensato es hacer la comparaci√≥n de las casu√≠sticas en base a viajes de horas completas: de 1 hora o de 2 horas. Recordemos que m√°s all√° de las 2 horas, hay penalizaciones, y adem√°s, son equivalentes en ambos casos, por lo que no repercuten en el c√°lculo de la diferencia monetaria entre una situaci√≥n y otra.

Separaremos nuestro problema en tres escenarios distintos. En el primero partiremos de que siempre cogeremos la bici para viajes de 1 hora. En el segundo, nuestros viajes ser√°n de 2 horas. Finalmente, contemplaremos la posibilidad de hacer viajes tanto de 1 hora como de 2 horas indistintamente y con la misma probabilidad cada uno, es decir, un 50 %. Lo que tenemos que hacer, por tanto, ser√° calcular para cada situaci√≥n de estas 3, cu√°nto gasto vamos acumulando por cada viaje en el caso de disponer de un abono anual de BiciMAD y en el caso de disponer de una tarjeta ocasional. A medida que vamos acumulando este gasto, iremos comprobando si hemos llegado al punto en el que el gasto acumulado disponiendo de abono anual es menor o igual que el gasto acumulado usando una tarjeta ocasional. Utilizando una tarjeta ocasional, en nuestros primeros viajes, nuestro gasto ser√° mucho menor ya que no tenemos que hacer un gasto inicial fijo de 15 o 25 ‚Ç¨, cosa que s√≠ ocurre con el abono anual. Sin embargo, la acumulaci√≥n de gasto ir√° aumentando m√°s r√°pidamente ya que los viajes en s√≠ son m√°s caros: 2 ‚Ç¨ la primera hora y 4 ‚Ç¨ la segunda frente a 0.50 ‚Ç¨ la primera media hora y 0.60 ‚Ç¨ las siguientes. Un viaje de 1 hora nos costar√≠a 2 ‚Ç¨ frente a 1.10 ‚Ç¨ y un viaje de 2 horas 6 ‚Ç¨ frente a 2.30 ‚Ç¨. Si s√≥lo hacemos viajes de 1 hora aguantaremos m√°s con una situaci√≥n en la que la tarjeta ocasional nos compense frente al abono anual. Sin embargo, haciendo viajes de 2 horas, con un peque√±o n√∫mero de viajes que hagamos, nos saldr√° rentable obtener el abono anual.

![Gr√°fica BiciMAD](/images/posts/curva1.png)

![Gr√°fica BiciMAD](/images/posts/curva2.png)

Simplemente utilizando las matem√°ticas y la geometr√≠a podr√≠amos encontrar el punto de corte entre dos rectas dados dos puntos de ellas: por ejemplo, los de los 2 primeros viajes. En el caso de viajes en bicicleta de 1 hora, tendremos en el viaje n√∫mero 1 un coste inicial y acumulado de 2 ‚Ç¨ con tarjeta ocasional y de 16.1 ‚Ç¨ con abono anual, disponiendo previamente del abono transporte de Madrid; en el viaje n√∫mero 2 acumularemos un gasto de 4 ‚Ç¨ con tarjeta ocasional y de 17.20 ‚Ç¨ con abono anual. Debemos encontrar as√≠ el punto de corte entre las rectas y = 2x (en rojo), y = 1.1x + 15 (en azul). En caso de viajes de 2 horas tendr√≠amos un problema equivalente con las rectas y = 6x (en rojo), y = 2.3x + 15 (en azul). Podemos darnos cuenta tambi√©n que estas rectas se basan en una pendiente de valor el coste de un viaje (para el viaje de 1 hora: 2 ‚Ç¨ con tarjeta ocasional y 1.10 ‚Ç¨ con abono anual; para el viaje de 2 horas: 6 ‚Ç¨ con tarjeta ocasional y 2.30 ‚Ç¨ con abono anual) y una ordenada en el origen de valor el desembolso inicial antes de realizar cualquier viaje (con tarjeta ocasional no hay gasto inicial y el abono anual cuesta 15 ‚Ç¨ si ya dispones de abono transporte). Igualando en este caso 2x y 1.1x + 15 obtenemos un valor de 16.6 peri√≥dico. Es decir, el n√∫mero m√≠nimo de viajes de 1 h que habr√≠a que hacer, si dispones previamente del abono transporte de Madrid, para que te compense comprar el abono anual de BiciMAD, ser√≠a 17. Esto mismo es lo que hemos podido realizar con nuestro c√≥digo, acudiendo a la programaci√≥n antes que a las matem√°ticas. ¬øO son lo mismo?...

Finalmente, obtenemos que en el caso de que dispongamos del abono transporte del CRTM para el resto de transporte p√∫blico de Madrid, pagar√≠amos con gusto 15 ‚Ç¨ por nuestro abono anual BiciMAD s√≥lo si nuestros viajes anuales con la bici por Madrid van a ser, al menos, 17 viajes de 1 hora, 5 de 2 horas o 8 de 1 o 2 horas (4 de 1 hora y 4 de 2 horas).

![C√≥digo BiciMAD](/images/posts/code1.png)

Si no tenemos el abono para el transporte p√∫blico de la Comunidad de Madrid, escoger√≠amos pagar 25 ‚Ç¨ por un abono anual BiciMAD en caso de realizar como m√≠nimo 28 viajes de 1 hora, 7 de 2 horas o 12 de 1 o 2 horas (6 de 1 hora y 6 de 2 horas).

![C√≥digo BiciMAD](/images/posts/code2.png)

As√≠ que, si quer√©is montar en bici estos d√≠as y no ten√©is una pero s√≠ ten√©is un abono transporte del CRTM, sacaos el abono anual de BiciMAD, que en 17 d√≠as lo ten√©is m√°s que amortizado y esto va para largo. Eso s√≠, pedalead y no us√©is el motor, que entonces no cuenta como deporte. Y, mientras tanto, mucho √°nimo. Saldremos poco a poco de todo esto.

> ‚ÄúLas matem√°ticas est√°n en todas partes, pero somos miopes‚Äù
>
> ###### Santi Garc√≠a Cremades
